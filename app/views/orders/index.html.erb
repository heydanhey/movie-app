<div id="orders">
  <div class="container">

    <div class="row">
      <div class="col">
        <div class="alert alert-info">
          <p class="text-center">Most Popular Movie:</p>
          <p class="text-center">
            <strong>{{ mostPopularMovie.movie }}</strong> |
            Tickets sold: 
            <strong>{{ mostPopularMovie.quantity }}</strong>
          </p>
        </div>
      </div>
      <div class="col">
        <div class="alert alert-info">
          <p class="text-center">Total Revenue:</p>
          <p class="text-center">
            <strong>${{ totalRevenue }}</strong>
          </p>
        </div>
      </div>
      <div class="col">
        <div class="alert alert-info">
          <p class="text-center">Total Tickets Sold:</p>
          <p class="text-center">
            <strong>{{ totalQuantity }}</strong>
          </p>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-4">
        <div class="form-group">
          <label>Filter by movie:</label>
          <select v-model="selectedMovie" class="form-control">
            <option value="">All Movies</option>
            <template v-for="movie in movies">
              <option v-bind:value="movie">{{movie}}</option>
            </template>
          </select>
        </div>
      </div>
      <div class="col-md-4">
        <div class="form-group">
          <label>Filter by day of the week:</label>
          <select v-model="selectedDay" class="form-control">
            <option value="">All Days</option>
            <option value="Monday">Monday</option>
            <option value="Tuesdady">Tuesday</option>
            <option value="Wednesday">Wednesday</option>
            <option value="Thursday">Thursday</option>
            <option value="Friday">Friday</option>
            <option value="Saturday">Saturday</option>
            <option value="Sunday">Sunday</option>
          </select>
        </div>
      </div>
    </div>

    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th v-on:click="sortAscDec('id')">ID</th>
            <th v-on:click="sortAscDec('created_at')">Created</th>
            <th v-on:click="sortAscDec('movie.title')">Movie</th>
            <th v-on:click="sortAscDec('showtime.time')">Showtime</th>
            <th v-on:click="sortAscDec('showtime.price')">Price</th>
            <th v-on:click="sortAscDec('quantity')">Quantity</th>
            <th v-on:click="sortAscDec('email')">Email</th>
          </tr>
        </thead>
        <tbody>
          <template v-for="order in filteredOrders">
            <tr :key="order.id">
              <td>{{ order.id }}</td>
              <td>{{ prettyDate(order.created_at) }}</td>
              <td>{{ order.movie.title }}</td>
              <td>{{ prettyDate(order.showtime.time) }}</td>
              <td>${{ order.showtime.price }}</td>
              <td>{{ order.quantity }}</td>
              <td>{{ order.email }}</td>
            </tr>
          </template>
        </tbody>
        <thead>
          <tr>
            <th>{{ filteredOrders.length }}</th>
            <th></th>
            <th></th>
            <th></th>
            <th>${{ totalRevenue }}</th>
            <th>{{ totalQuantity }}</th>
            <th></th>
          </tr>
        </thead>
      </table>
    </div>
  </div>
</div>
